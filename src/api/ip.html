<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <link
      id="favicon"
      rel="icon"
      type="image/png"
      href=""
    />
    <title>ip</title>
  </head>
  <body
    style="height: 100dvh; margin: 0; background-color: #282c34; color: white"
  >
    <pre id="code">
{
  "ip": "127.0.0.1",
  "host": "localhost:5714",
  "method": "GET",
  "path": "/api/ip",
  "userAgent": ""
}
  </pre
    >
  </body>
  <script type="module">
    import { codeToHtml } from "https://esm.sh/shikiji@0.9.12/bundle/web";
    import { main } from "../main.mjs";
    main();
    const ipApi = await fetch("https://api.ipify.org/?format=json")
      .then((res) => res.json())
      .then((res) => res.ip);
    code.innerHTML = await codeToHtml(
      `{
  "ip": "${ipApi}",
  "host": "${window.location.host}",
  "method": "GET",
  "path": "${window.location.pathname}",
  "userAgent": "${navigator.userAgent}"
}`,
      {
        lang: "json",
        theme: "one-dark-pro",
      }
    );
  </script>
</html>
